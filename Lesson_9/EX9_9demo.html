<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Lesson 9 EX 9.9</title>
		 
		 <style>

				#myDiv {				 
				 position:absolute;
				 left:0px;
				 top:8em;
				 width:150px;
				 line-height:50px;
				 text-align: center;
				 background:#99ccff;
				 border:1px solid #003366;
				 white-space:nowrap;
				 padding:0.5em;
				}
				
				#canvas{float:left;}
				
				#directions{
							float:left;
							width:200px;
				            border:1px solid black;
							padding:10px;
							}

		</style>
		<script>

				var myElement; 
				var myInterval;
				var x = 0;
				var y = 300;
								
				function doMove() {
						x = x+1;
						mycanvas.clearRect(0,0,800,600);
											
						//Draw box
						  mycanvas.fillStyle="#99ccff";
						  myObject = mycanvas.fillRect(x,y-50,150,50);
						  mycanvas.font="20px Tahoma";
						  mycanvas.fillStyle="black";
						  mycanvas.fillText("Click Me!",x+30,y-20);
				 					}
									
				function moveLeft() {
						x = x-1;
						mycanvas.clearRect(0,0,800,600);
							
						//Draw box
						  mycanvas.fillStyle="#99ccff";
						  myObject = mycanvas.fillRect(x,y-50,150,50);
						  mycanvas.font="20px Tahoma";
						  mycanvas.fillStyle="black";
						  mycanvas.fillText("Click Me!",x+30,y-20);
				 					}
													
				function moveUp() {				
						y=y-1;
						mycanvas.clearRect(0,0,800,600);
										
						//Draw box
						  mycanvas.fillStyle="#99ccff";
						  myObject = mycanvas.fillRect(x,y-50,150,50);
						  mycanvas.font="20px Tahoma";
						  mycanvas.fillStyle="black";
						  mycanvas.fillText("Click Me!",x+30,y-20);
				 					}
									
				function moveDown() {					
						y=y+1;
						mycanvas.clearRect(0,0,800,600);
										
						//Draw box
						  mycanvas.fillStyle="#99ccff";
						  myObject = mycanvas.fillRect(x,y-50,150,50);
						  mycanvas.font="20px Tahoma";
						  mycanvas.fillStyle="black";
						  mycanvas.fillText("Click Me!",x+30,y-20);
				 					}
									
				function restartMove() {
						myInterval = null;
						myInterval = setInterval(doMove,20); // call doMove in 20msec
				}
											
				function followMe(e){					
						var xPos = e.clientX;  //Get x value from clients mouse
						var yPos = e.clientY;  //Get y value from clients mouse
					
						//Clear all Intervals created
						for (var i = 1; i < 99999; i++)
								window.clearInterval(i);
											
						//Clear and reDraw box with new text
						  mycanvas.clearRect(0,0,800,600);
						  						  
						  mycanvas.fillStyle="#99ccff";
						  myObject = mycanvas.fillRect(xPos+0,yPos-50,150,50);
						  mycanvas.font="20px Tahoma";
										  
						  mycanvas.fillStyle="black";
						  mycanvas.fillText("Double Click Me!",xPos+3,yPos-20);
						  
						  x=xPos;
						  y=yPos;							
					}
					
					
				function checkKey(e) {								
										// Up arrow was pressed.
										if (event.keyCode == 38){										
												 //clearInterval(myInterval);
												myInterval = setInterval(moveUp,20); 																
																}
																
										// Down arrow was pressed.						
										else if(event.keyCode == 40){
												//clearInterval(myInterval);
												myInterval = setInterval(moveDown,20); 
																	}
																	
										// Right arrow was pressed.
										else if(event.keyCode == 39){
												//clearInterval(myInterval);
												myInterval = setInterval(doMove,20); 
																	}
																	
										// Left arrow was pressed.
										else if(event.keyCode == 37){
												//clearInterval(myInterval);
												myInterval = setInterval(moveLeft,20); 
																	}
																	
										else{
											alert("Use the Arrows Keys to Move the box!");
											}
										
										}
				function stopMe(){
				
							for (var i = 1; i < 99999; i++)
							window.clearInterval(i);
							
							x=0;
							y=300;
							
							//Draw box
							 mycanvas.clearRect(0,0,800,600);														 
							mycanvas.fillStyle="#99ccff";
							mycanvas.fillRect(300,300,150,50);
							mycanvas.font="20px Tahoma";
							mycanvas.fillStyle="black";
							mycanvas.fillText("Click Me!",330,335);
								}						
				
				function init() {	

						canvasElem = document.getElementById('canvas');
						mycanvas = canvasElem.getContext('2d');
						
						//Draw box
						mycanvas.fillStyle="#99ccff";
						mycanvas.fillRect(0,300,150,50);
						mycanvas.font="20px Tahoma";
						mycanvas.fillStyle="black";
						mycanvas.fillText("Click Me!",30,335);
						
						myInterval = setInterval(doMove,20); // call doMove every 20msec
						 						  
						//Add Event Listeners
						canvasElem.addEventListener("click", followMe);
						canvasElem.addEventListener("dblclick", restartMove);
						window.addEventListener("keydown", checkKey);
						document.getElementById("restartBtn").addEventListener("click", stopMe);
				  
								}			
				  window.onload = init;

		</script>
	</head>

		<body>
			<div><input type="submit" value="Come Home" id="restartBtn" /></div>
			<canvas id="canvas" width="800" height="600" style="border:1px solid black;">
			       If you see this Text your browser does not support the HTML5 canvas element! Install IE 11 or Google Chrome
			</canvas>
			<div id="directions">Tap the keyboard left, right, up, and down arrows to move the box.  Click anywhere on the canvas to stop the box or click the come home button. If the arrow keys are held down or clicked too many times the box may leave too far off of the screen to get it back.
			</div>

		</body>
</html>